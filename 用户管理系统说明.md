# 用户管理系统说明

## 📝 系统概述

本系统已集成用户登录和管理功能，只有登录后才能使用表单填写工具。

## 👥 默认账号

系统初始化时会自动创建以下账号：

### 管理员账号
- **用户名**: `admin`
- **密码**: `admin123`
- **权限**: 管理员，可以管理所有用户

### 测试用户
- **用户名**: `user`
- **密码**: `user123`
- **权限**: 普通用户，只能使用填表功能

## 🔐 登录流程

1. 启动应用后，首先显示登录窗口
2. 输入用户名和密码
3. 点击"登录"按钮或按回车键
4. 登录成功后进入主界面

## ⚙️ 用户管理（仅管理员）

管理员登录后，在主界面顶部会显示：
- 用户名和角色标识
- "⚙️ 用户管理"按钮

### 管理功能

点击"用户管理"按钮可以：

1. **查看用户列表**
   - 用户名
   - 角色（管理员/普通用户）
   - 状态（激活/禁用）
   - 创建时间
   - 最后登录时间

2. **添加用户**
   - 设置用户名
   - 设置密码
   - 选择角色（管理员/普通用户）

3. **编辑用户**
   - 修改密码
   - 修改角色

4. **启用/禁用用户**
   - 禁用后用户无法登录
   - 管理员不能禁用自己

5. **删除用户**
   - 永久删除用户账号
   - 不能删除自己
   - 不能删除最后一个管理员

## 🔒 权限说明

### 管理员权限
- ✅ 使用表单填写功能
- ✅ 管理名片和链接
- ✅ 查看填写记录
- ✅ 管理所有用户
- ✅ 创建、编辑、删除用户
- ✅ 启用/禁用用户

### 普通用户权限
- ✅ 使用表单填写功能
- ✅ 管理名片和链接
- ✅ 查看填写记录
- ❌ 无法访问用户管理

## 💡 使用建议

1. **首次使用**
   - 建议先用 `admin` 账号登录
   - 修改默认密码以提高安全性
   - 为团队成员创建独立账号

2. **密码安全**
   - 密码使用 SHA256 加密存储
   - 定期修改密码
   - 不要使用过于简单的密码

3. **用户管理**
   - 至少保留一个管理员账号
   - 离职人员及时禁用或删除账号
   - 定期检查用户登录情况

4. **数据安全**
   - 所有用户数据存储在 MongoDB
   - 定期备份数据库
   - 妥善保管数据库连接信息

## 📌 注意事项

1. **账号安全**
   - 不要与他人共享管理员账号
   - 发现异常登录及时修改密码

2. **用户管理**
   - 删除用户操作不可恢复
   - 禁用用户后该用户无法登录
   - 系统至少需要一个激活的管理员

3. **数据库**
   - 用户数据存储在 `users` 集合
   - 密码已加密，无法直接查看
   - 忘记密码需要管理员重置

## 🔧 技术实现

- **用户认证**: SHA256 密码哈希
- **会话管理**: 登录后传递用户对象
- **权限控制**: 基于角色的访问控制（RBAC）
- **数据存储**: MongoDB + MongoEngine ODM

## 📞 常见问题

**Q: 忘记管理员密码怎么办？**
A: 可以通过 MongoDB 数据库工具直接修改，或联系技术支持

**Q: 可以修改默认账号吗？**
A: 可以，登录后在用户管理中修改或删除

**Q: 普通用户可以看到其他用户吗？**
A: 不可以，用户管理功能仅管理员可见

**Q: 用户数据会丢失吗？**
A: 不会，所有数据持久化存储在 MongoDB 中

## 🎯 下一步

- [x] ✅ 用户登录功能
- [x] ✅ 用户管理后台
- [x] ✅ 权限控制
- [x] ✅ 密码加密
- [ ] 🔄 登录日志记录
- [ ] 🔄 密码强度验证
- [ ] 🔄 找回密码功能

---

**版本**: 2.0.0  
**更新时间**: 2025-10-21  
**作者**: 自动表单填写工具团队

